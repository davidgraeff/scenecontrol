<!DOCTYPE html>
<html>
	<head><title>Profile</title>
		<meta charset=utf-8 />
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
		<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
		<script src="/_utils/script/jquery.couch.js"></script>
		<script src="/roomcontrol/html_server/websocket.js"></script>
		<script src="/roomcontrol/html_server/handlebars.1.0.0.beta.3.js"></script>
		<script src="/roomcontrol/html_server/collections.js"></script>
	</head>
	<body>

		<div data-role="page" id="collectionpage">
			<div data-role="header">
				<a href="index.html" data-role="button" data-iconpos="notext" data-direction="reverse" data-icon="arrow-l" >Zur√ºck</a>
				<h1>Profile</h1>
				<a href="collection_name.html" data-rel="dialog" data-role="button" data-icon="plus" onclick="collections.setCollection('');">Neu</a>
			</div>
			<div data-role="content">	
				<ul id="collections" data-role="listview" data-filter="true" data-split-icon="gear" data-split-theme="d"></ul>
				<script id="collections-entry-template" type="text/x-handlebars-template">
					<li data-icon="info">
						<a id="li_{{collectionid}}" href="collection_services.html" onclick="collections.setCollection('{{collectionid}}');">
							{{name}}
						</a>
						<a href="collection_actions.html" data-rel="dialog" data-transition="pop" onclick="collections.setCollection('{{collectionid}}');">
							Collection actions
						</a>
					</li>
				</script>
			</div>
			<script>
				$( '#collectionpage' ).live( 'pageinit',function(event){
					function collectionsReady(colls) {
						var template_collection_entry = Handlebars.compile($("#collections-entry-template").html());
						var collectionsdom = $("#collections");
						collectionsdom.empty();
						for (var collectionid in colls) {  
							var entry = {"collectionid":collectionid, "name":colls[collectionid].name};
							collectionsdom.append(template_collection_entry(entry));
						}  
						collectionsdom.listview('refresh');
					};
					collections.getCollections(collectionsReady);
				});
			</script>
		</div>

	</body>
</html>
