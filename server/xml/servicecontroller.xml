<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<plugin id="servicecontroller" version="1.0">
	<!-- Propagates server condition -->
	<property id="serverstate">
		<enum id="state" n="2" /><!-- ready, going offline -->
	</property>
	<property id="plugininfo">
		<string id="plugins" separator=";" /><!-- plugin names -->
	</property>

	<!-- Server command -->
	<execute id="servercmd" group_restriction="adm, roomcontrol_admin">
		<enum id="state" n="3" /><!-- resync client, restart, stop server -->
	</execute>
	
	<!-- Generate and send unique id for new services. Security restrictions may forbid generating new ids for a client -->
	<execute id="generateUniqueID" />
	<property id="generatedUniqueID">
		<string id="uid" />
	</property>
	
	<execute id="requestPluginInfos" />
	<execute id="requestServices" />
	<execute id="requestProperties" />
	<execute id="requestSettings" />
	<property id="transfer.service.complete" />
	<property id="transfer.properties.complete" />
	<property id="transfer.settings.complete" />
	
	<event id="serverevent">
		<enum id="state" n="2" /><!-- ready, going offline -->
	</event>
	
	<action id="executecollection">
		<string id="collectionid" model="collections" model_key="collectionid" model_show="name" />
	</action>
	<action id="stopcollection">
		<string id="collectionid" model="collections" model_key="collectionid" model_show="name" />
	</action>
	
	<execute id="clone">
		<string id="collectionid" model="collections" model_key="collectionid" model_show="name" />
	</execute>
	
	<collection>
		<string id="name" />
		<stringlist id="services" />
		<stringlist id="categories" />
		<bool id="enabled" />
	</collection>
	
	<model id="collections" model_key="uid">
		<string id="uid"></string>
		<string id="name"></string>
	</model>

	<model id="plugins" model_key="pluginid">
		<string id="pluginid"></string>
		<string id="pluginname"></string>
	</model>

	<model id="functions" model_key="functionid">
		<string id="functionid"></string>
		<string id="pluginid"></string>
		<string id="sectionname"></string>
	</model>

	<section>collections</section>
</plugin>
