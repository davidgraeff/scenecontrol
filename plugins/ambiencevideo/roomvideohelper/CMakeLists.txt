PROJECT(roomvideohelper)
cmake_minimum_required(VERSION 2.6)
find_package(Qt4 REQUIRED)

OPTION(PLUGIN_${PROJECT_NAME}_EXEC "Plugin executable helper: ${PROJECT_NAME}" ON)

IF (PLUGIN_${PROJECT_NAME}_EXEC)
	IF(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)
	  SET(CMAKE_INSTALL_PREFIX
	    "/usr" CACHE PATH "${PROJECT_NAME} install prefix" FORCE
	    )
	ENDIF(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)

	# set default build type
	IF (NOT CMAKE_BUILD_TYPE)
	  SET(CMAKE_BUILD_TYPE RelWithDebInfo CACHE STRING "Build Type")
	  SET(CMAKE_CONFIGURATION_TYPES RelWithDebInfo Release Debug CACHE STRING "")
	ENDIF (NOT CMAKE_BUILD_TYPE)

	QT4_WRAP_CPP(SRCS_MOCS main.h)
	include_directories(${QT_INCLUDES} ${CMAKE_CURRENT_BINARY_DIR} ${CMAKE_CURRENT_SOURCE_DIR})
	ADD_DEFINITIONS(-Wall -W -DQT_USE_FAST_OPERATOR_PLUS -DQT_USE_FAST_CONCATENATION ${QT_DEFINITIONS})
	ADD_EXECUTABLE(${PROJECT_NAME} main.cpp ${SRCS_MOCS})
	target_link_libraries(${PROJECT_NAME} ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY} ${QT_QTNETWORK_LIBRARIES} phonon)

	INSTALL(TARGETS ${PROJECT_NAME} DESTINATION bin CONFIGURATIONS Debug Release RelWithDebInfo)
ENDIF()
