cmake_minimum_required(VERSION 2.6)
set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_CURRENT_SOURCE_DIR}/../cmake/")
find_package(RoomPlugins REQUIRED)
PROJECT(roompulsehelper)

set(CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/cmake")
find_package(PulseAudio QUIET)
#find_package(GLIB2 REQUIRED)

OPTION(PLUGIN_${PROJECT_NAME}_EXEC "Plugin executable helper: ${PROJECT_NAME}" ON)

IF (PLUGIN_${PROJECT_NAME}_EXEC AND PULSEAUDIO_FOUND)
	include_directories(${CMAKE_CURRENT_BINARY_DIR} ${PULSEAUDIO_INCLUDE_DIR})
	ADD_DEFINITIONS(-Wall -W)
	ADD_EXECUTABLE(${PROJECT_NAME} main.cpp)
	target_link_libraries(${PROJECT_NAME} 
	${PULSEAUDIO_LIBRARY} ${PULSEAUDIO_MAINLOOP_LIBRARY} -lglib-2.0 
	)

	INSTALL(TARGETS ${PROJECT_NAME} DESTINATION bin COMPONENT Server)
ELSE()
	MESSAGE("Not building: ${PROJECT_NAME}")
ENDIF()
