cmake_minimum_required(VERSION 2.6)
LIST(APPEND CMAKE_MODULE_PATH  "${CMAKE_CURRENT_SOURCE_DIR}/../cmake/")
find_package(RoomPlugins REQUIRED)
find_package(PulseAudio REQUIRED)
find_package(GLIB2 QUIET)

PROJECT(roompulsehelper)

OPTION(PLUGIN_${PROJECT_NAME}_EXEC "Plugin executable helper: ${PROJECT_NAME}" ON)

IF (PLUGIN_${PROJECT_NAME}_EXEC AND PULSEAUDIO_FOUND AND GLIB2_FOUND)
	include_directories(${CMAKE_CURRENT_BINARY_DIR} ${PULSEAUDIO_INCLUDE_DIR} ${GLIB2_INCLUDE_DIRS})
	ADD_DEFINITIONS(-Wall -W)
	ADD_EXECUTABLE(${PROJECT_NAME} main.cpp)
	target_link_libraries(${PROJECT_NAME} 
	${PULSEAUDIO_LIBRARY} ${PULSEAUDIO_MAINLOOP_LIBRARY} ${GLIB2_LIBRARIES}
	)

	INSTALL(TARGETS ${PROJECT_NAME} DESTINATION bin COMPONENT Server)
ELSE()
	MESSAGE("Not building: ${PROJECT_NAME}")
ENDIF()
