cmake_minimum_required(VERSION 2.6)
find_package(RoomPlugins REQUIRED)
find_package(Qt4 4.7.0 COMPONENTS QtCore Phonon REQUIRED)

PROJECT(remotesystemclient)

OPTION(PLUGIN_${PROJECT_NAME}_EXEC "Plugin executable helper: ${PROJECT_NAME}" ON)

IF (PLUGIN_${PROJECT_NAME}_EXEC AND QT_PHONON_FOUND)
	QT4_WRAP_CPP(SRCS_MOCS main.h)
	include_directories(${QT_INCLUDES} ${QT_PHONON_INCLUDE_DIR}  ${CMAKE_CURRENT_BINARY_DIR} ${CMAKE_CURRENT_SOURCE_DIR})
	ADD_DEFINITIONS(-Wall -W -DQT_USE_FAST_OPERATOR_PLUS -DQT_USE_FAST_CONCATENATION ${QT_DEFINITIONS})
	ADD_EXECUTABLE(${PROJECT_NAME} main.cpp ${SRCS_MOCS})
	target_link_libraries(${PROJECT_NAME} ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY} ${QT_QTNETWORK_LIBRARIES} ${QT_PHONON_LIBRARIES})

	INSTALL(TARGETS ${PROJECT_NAME} DESTINATION bin COMPONENT Server)
ENDIF()
